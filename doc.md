

本文件为【2024-2025夏季学期《计算机编程实训》（0830A034）课程】作业操作文档

# 前置工作

*实测在 vscode 中 `Sorts\SortString.cpp` 会报错，本文档使用 Clion，以避免可能的环境问题，不要在乎下发的 `MakePrj`，请相信 Clion 比它好用一万倍*



-   [ ] 从学习通中下载所有的代码文件，将其放在一个文件夹下
-   [ ] 安装CMake
-   [ ] 安装 Clion（可参考 [CLion安装、配置、使用、调试（完全小白向）](https://blog.csdn.net/annesede/article/details/133940779) ）
-   [ ] 打开文件夹，选择以 GBK 编码打开
-   [ ] 打开 `Sorts` 文件夹，点击配置 CMakeList，选中所有 `*.h*` 和`*.cpp*`文件，在上方任务栏点击运行，看到正确的输出（如果这一步没能成功，请选择“工具——CMake——卸载 CMake 项目重新进行”）
-   [ ] 在 `cmake-build-debug` 目录下确认 `Sorts.exe`，将下发文件中的 `Release` 目录下的文件复制到与 `Sorts.exe` 同目录，在这个目录下运行命令行，并执行 `run.bat`



```
数据类型: i (正态分布)
        冒泡排序        选择排序        快速排序
1024    0.003   0.001   0       冒泡排序: 正确  选择排序: 正确  快速排序: 正确
2048    0.004   0.002   0       冒泡排序: 正确  选择排序: 正确  快速排序: 正确
4096    0.028   0.006   0.001   冒泡排序: 正确  选择排序: 正确  快速排序: 正确
8192    0.061   0.029   0.002   冒泡排序: 正确  选择排序: 正确  快速排序: 正确
16384   0.361   0.096   0.004   冒泡排序: 正确  选择排序: 正确  快速排序: 正确
```



如果遇到栈溢出问题（`exit code -1073741571 (0xC00000FD)`），可以暂时将 `Main.cpp` 第 47 行的 $n$ 设为 `8192`



# 排序算法的实验与优化



在这一部分，您需要：



1.   学习【冒泡排序】、【选择排序】、【快速排序】三种排序算法
2.   对于每种排序算法，您需要完成“基本介绍”、“未优化的代码”、“数据分析（表格+柱状图）”、“优化后的代码”、“优化前后效果比较（表格+柱状图）”五个部分



需要使用的代码均存放于 `Sorts` 文件夹下，项目的逻辑如下：



-   `MyRand.h / MyRand.cpp` 提供了随机数据生成辅助，便于测试不同规模和分布的数据排序效果。
-   `Main.cpp` 是程序的主入口，对各种排序算法进行适应性和用时测试。
    -   调用 `Test((int)(0))` 进行 `int` 类型的测试
    -   调用 `Test((double)(0))` 进行 `double` 类型的测试
    -   `Score.h / Score.cpp` 自定义了一个结构体类型，调用 `TestScore()` 进行排序测试。
    -   `SortString.h / SortString.cpp` 用不同的方式存储字符串，分别使用两个 `Bubble` 函数进行



在整个项目的编写过程中，您只需要修改 `Main.cpp` 中的三个排序函数以及 `SortString.cpp` 中的两个 `Bubble` 函数



-   您已经在前置工作中完成了代码环境的配置
- [ ] 学习【冒泡排序】、【选择排序】、【快速排序】三种排序算法的基本逻辑，看懂优化前的代码



您可能会产生的疑惑：



-   `template` 的用法
-   各种指针
-   多文件的编译、链接逻辑



- [ ] 测试三种排序算法



使用 Clion 编译后会在目录下产生一个 `cmake-build-debug` 目录，里面有一个 `Sorts.exe`，将下发的 Release 文件夹中 `run.bat` 等文件拷贝到 `Sorts.exe` 同目录下，在命令行中运行 `run.bat`，等待运行完成后打开 `results.xlsx` 和 `results_release.txt`，选中 `results.xlsx` 中左上角的单元格，将 `results_release.txt` 中的内容复制到 `xlsx` 中，图表会对应更新。



- [ ] 尝试优化三种排序算法



可能的优化思路：

-   在数据有序时直接退出
-   减少无用的常数操作
-   手写栈代替系统栈防止溢出
-   使用随机数防止快排退化
-   采用多种排序算法混合缩小常数



# MIDI 实现优化算法可视化及设计歌曲



